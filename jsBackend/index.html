<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/buzzfeed/libgif-js/master/libgif.js"></script>

<h1 id="title">Javascript example no.2</h1>
<input type="text" id="myTextField"/>
<input type="submit" id="byBtn" value="Change" onclick="change()"/>
        <img src="https://i.imgur.com/RY2vTBQ.gif" 
        rel:auto_play="1" 
        rel:gifFilebable="0" />

<div id="frames">
</div>

<script>

$(document).ready(function () 
{
  $('img').each(function (idx, img_tag) 
  {
    if (/^.+\.gif$/.test($(img_tag).prop("src"))) 
	{
		var gifFile = new SuperGif({ gif: img_tag, progressbar_height: 0 } );
		
		gifFile.load(function()
		{
			for (var i = 0; i < gifFile.get_length(); i++)
			{
			   gifFile.move_to(i); 
			   
			   var c = gifFile.get_canvas();
			   var ctx=c.getContext("2d");
			   var pixels=ctx.getImageData(0,0,c.width,c.height);

			   console.log("AVG FOR FRAME " + i);
			   test(pixels);
			}
      });
    }
  });
});


function test(imgData)
{

	var greySum = 0;
	for (var i=0;i<imgData.data.length;i+=4)
	{
	  var r = imgData.data[i];
	  var g = imgData.data[i+1];
	  var b = imgData.data[i+2];
	 
	  greySum += (r+g+b)/3;
	}

	console.log(greySum/(imgData.data.length / 4));


	
}
          


function cloneCanvas(oldCanvas) {

    //create a new canvas
    var newCanvas = document.createElement('canvas');
    var context = newCanvas.getContext('2d');

    //set dimensions
    newCanvas.width = oldCanvas.width;
    newCanvas.height = oldCanvas.height;

    //apply the old canvas to the new one
    context.drawImage(oldCanvas, 0, 0);

    //return the new canvas
    return newCanvas;
}

</script>


